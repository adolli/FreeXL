<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ImageStone图像处理C++类库-好库网</title>
<link rel="stylesheet" type="text/css" href="instructure_files/global.css">
<link rel="stylesheet" type="text/css" href="instructure_files/menu.css">
<link rel="stylesheet" type="text/css" href="instructure_files/button.css">
<link rel="stylesheet" type="text/css" href="instructure_files/banner.css">
<link rel="stylesheet" type="text/css" href="instructure_files/rect.css">
<link rel="stylesheet" type="text/css" href="instructure_files/authorhome.css">
<script src="instructure_files/jquery.js" type="text/javascript"></script>
</head>

<body><script charset="utf-8" src="instructure_files/jiathis.php"></script><link type="text/css" rel="stylesheet" href="instructure_files/jiathis_share.css"><iframe style="position: fixed; display: none; opacity: 0;" frameborder="0"></iframe><div style="position: absolute; z-index: 1000000000; display: none; top: 50%; left: 50%; overflow: auto;" class="jiathis_style"></div><div style="position: absolute; z-index: 1000000000; display: none; overflow: auto;" class="jiathis_style"></div><iframe src="instructure_files/jiathis_utility.htm" style="display: none;" frameborder="0"></iframe>
<div id="topframe">
<span style="float:left">
<script type="text/javascript" src="instructure_files/logoninfo.htm"></script>您好，欢迎光临好库！[ <a href="http://www.okbase.net/account/logon">请登录</a> ][ <a href="http://www.okbase.net/account/register">免费注册</a> ]
</span>
<span style="float:right"><a href="http://www.okbase.net/">好库网首页</a> | <a href="http://www.okbase.net/account/home">我的好库</a> </span>
</div>
<div id="headframe">
<div class="left">
<a href="http://www.okbase.net/"><img src="instructure_files/logo.gif" alt="好库网" border="0" height="45" width="163"></a> 
</div>
<!--SOSO search -->
<form action="http://www.soso.com/q" id="cse-search-box" target="_blank">
<div style="float:right;overflow:hidden;margin:8px 20px 0 0;">
<input name="site" value="okbase.net" type="hidden">
<input name="ch" value="website" type="hidden">
<div style="margin-top:1px;border:solid 1px;border-color:#F38B23;height:32px;float:left">
<input name="w" size="60" maxlength="50" style="margin-top:5px;border-width:0px;height:20px;float:left" type="text">
</div>
<input name="sa" value="搜索" src="instructure_files/btn_search.gif" style="margin-left:-2px;border-style: none;" border="0" type="image">
</div>
</form>
<!--SOSO search -->
</div>

<div id="contentframe">

<link rel="stylesheet" type="text/css" href="instructure_files/listview.css">
<link rel="stylesheet" type="text/css" href="instructure_files/goodsitem.css">
<link type="text/css" rel="stylesheet" href="instructure_files/shCore.css">
<link type="text/css" rel="stylesheet" href="instructure_files/shThemeDefault.css"> 
<script type="text/javascript" src="instructure_files/shCore.js"></script> 
<script type="text/javascript" src="instructure_files/shBrushCpp.js"></script> 
<script type="text/javascript" src="instructure_files/shBrushCSharp.js"></script> 
<script type="text/javascript" src="instructure_files/shBrushJava.js"></script>
<script type="text/javascript" src="instructure_files/shBrushPhp.js"></script> 
<script type="text/javascript" src="instructure_files/shBrushVb.js"></script> 
<script type="text/javascript">
    $(document).ready(function() {
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.all(); 
    });
</script> 

<div id="columnheader">
<div id="columnbanner" style=""><div id="columnname">VC开发指南</div></div>
<ul class="navmenu">
	<li><a href="http://www.okbase.net/home/vchelp"><b>专栏首页</b></a></li>
	<li class="current"><a href="http://www.okbase.net/home/vchelp/doc/"><b>文章</b></a></li>
	<li><a href="http://www.okbase.net/home/vchelp/file/"><b>下载</b></a></li>
	<li><a href="http://www.okbase.net/home/vchelp/pic/"><b>图库</b></a></li>
	<li><a href="http://www.okbase.net/home/vchelp/about/"><b>专栏介绍</b></a></li>
</ul>

</div>
<div id="contentleft">


<div id="authorsummary">
<div id="authorphoto"><img src="instructure_files/vchelp.jpg" border="0"></div>
<div id="nickname">vchelp</div>
</div>

<div class="cbanner hotbox">
<span class="x1"><span class="x1a"></span></span>
<div class="hd">
  <span class="act">
  </span><h3>文章分类</h3>
</div>
<div class="cbanner-content">
<ul>
<li><a href="http://www.okbase.net/doc/uclist/10">C语言入门</a></li>
</ul>
</div>
<span class="x2"><span class="x2a"></span></span>
</div><!-- end cbanner -->
<div class="cbanner hotbox">
<span class="x1"><span class="x1a"></span></span>
<div class="hd">
  <span class="act">
  </span><h3>最新文章</h3>
</div>
<div class="cbanner-content">
<ul>
<li><a href="http://www.okbase.net/doc/details/2572" target="_blank">C语言实现堆排序(Heap Sort)</a></li>
<li><a href="http://www.okbase.net/doc/details/2571" target="_blank">C语言冒泡排序法演示代码</a></li>
<li><a href="http://www.okbase.net/doc/details/2570" target="_blank">C语言建立和遍历二叉树</a></li>
<li><a href="http://www.okbase.net/doc/details/2569" target="_blank">C语言实现堆栈stack操作</a></li>
<li><a href="http://www.okbase.net/doc/details/2568" target="_blank">C语言中队列Queue的操作</a></li>
<li><a href="http://www.okbase.net/doc/details/2567" target="_blank">C语言创建链表并实现插入、删除数据</a></li>
<li><a href="http://www.okbase.net/doc/details/2566" target="_blank">谭浩强C语言教程</a></li>
<li><a href="http://www.okbase.net/doc/details/2565" target="_blank">文件处理-C语言教程</a></li>
<li><a href="http://www.okbase.net/doc/details/2564" target="_blank">位运算-C语言教程</a></li>
<li><a href="http://www.okbase.net/doc/details/2563" target="_blank">结构体与共用体-C语言教程</a></li>
</ul></div>
<span class="x2"><span class="x2a"></span></span>
</div><!-- end cbanner -->
<div style="margin:0 0 10px 10px;">
<script type="text/javascript">/*200*200，创建于2012-5-28*/ var cpro_id = 'u917057';</script><script src="instructure_files/c.js" type="text/javascript"></script><script type="text/javascript" charset="utf-8" src="instructure_files/ecom"></script><div style="display:none">-</div> <iframe id="cproIframe1" src="instructure_files/uijs.htm" marginwidth="0" marginheight="0" allowtransparency="true" align="center,center" frameborder="0" height="200" scrolling="no" width="200"></iframe>
</div>
<div class="cbanner hotbox">
<span class="x1"><span class="x1a"></span></span>
<div class="hd">
  <span class="act">
  </span><h3>热门文章</h3>
</div>
<div class="cbanner-content">
<ul>
<li><a href="http://www.okbase.net/doc/details/2528" target="_blank">ImageStone图像处理C++类库</a></li>
<li><a href="http://www.okbase.net/doc/details/2568" target="_blank">C语言中队列Queue的操作</a></li>
<li><a href="http://www.okbase.net/doc/details/2521" target="_blank">kmp算法中的求Next()函数的算法</a></li>
<li><a href="http://www.okbase.net/doc/details/2571" target="_blank">C语言冒泡排序法演示代码</a></li>
<li><a href="http://www.okbase.net/doc/details/2569" target="_blank">C语言实现堆栈stack操作</a></li>
<li><a href="http://www.okbase.net/doc/details/2572" target="_blank">C语言实现堆排序(Heap Sort)</a></li>
<li><a href="http://www.okbase.net/doc/details/2567" target="_blank">C语言创建链表并实现插入、删除数据</a></li>
<li><a href="http://www.okbase.net/doc/details/2549" target="_blank">Turbo C 2.0集成开发环境的使用(下)-C语言教程</a></li>
<li><a href="http://www.okbase.net/doc/details/2570" target="_blank">C语言建立和遍历二叉树</a></li>
<li><a href="http://www.okbase.net/doc/details/2553" target="_blank">最简单的C语言顺序程序设计-C语言教程</a></li>
</ul></div>
<span class="x2"><span class="x2a"></span></span>
</div><!-- end cbanner -->


</div>
<div id="contentmain">
    <h2>ImageStone图像处理C++类库</h2> 
    <div id="cats">所属分类：<a href="http://www.okbase.net/doc/list/">所有分类</a> » <a href="http://www.okbase.net/doc/list/10000">软件开发</a> » <a href="http://www.okbase.net/doc/list/11000">C/C++</a> » <a href="http://www.okbase.net/doc/list/11300">VC/MFC</a> » <a href="http://www.okbase.net/doc/list/11370">图形图像多媒体</a></div>
<div id="summary" class="crect">
<div>发布者：vchelp <img src="instructure_files/rk_h0.gif"></div>
<div>发布日期：2012-5-23 20:11:07 &nbsp;&nbsp;更新日期：2012-5-23 20:11:07</div>
<div>浏览次数：0</div>
<div>阅读次数：507</div>
<div>评分：4.80</div>
</div>
<div class="okbclear"></div>
<div id="introduce">介绍：ImageStone是一个功能强大的图像处理C++类库。它采用纯C++编写，接口简单。功能包括：加
载、保存（JPG格式，BMP,GIF,PNG,TIFF,ICO图标，TGA,PCX,PSD）、显示，直方图，撤销(undo)/重做(redo)，
超过100个图像特效。</div>
正文：
<div id="details"><p>
</p><p><br>作者：crazybit</p>
<p>&nbsp;</p>
<p>介绍</p>
<p>ImageStone是一个功能强大的图像处理C++类库。它采用纯C++编写，接口简单。功能包括：加载、保存（JPG格
式，BMP,GIF,PNG,TIFF,ICO图标，TGA,PCX,PSD）、显示，直方图，撤销(undo)/重做(redo)，超过100个图像特
效。</p>
<p>&nbsp;</p>
<p>许可</p>
<p>&nbsp;</p>
<p>ImageStone是免费的。使用代码无论用在什么地方都行（商业的也可以），只要你不声称它是你自己的。（如果你将它用在你的产品中，我希望你能通知我。）</p>
<p>&nbsp;</p>
<p>使用ImageStone</p>
<p>这是非常容易的。所有你需要做的就是在您的源代码的开头添加#include "ImageStone.h"。如果您使用的是一个MFC项目ImageStone，只需要在StdAfx.h里添加该行。</p>
<p>&nbsp;</p>
<p>最基本和最重要的类是FCObjImage。了解如何使用它。</p>
<p>&nbsp;</p>
<p>在任意操作系统中加载、保存图像文件</p>
<p>&nbsp;</p>
<div><div id="highlighter_921462" class="syntaxhighlighter  cpp "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// for Windows : ImageStone uses GDI+ to load/save image,</code></div><div class="line number2 index1 alt1"><code class="cpp comments">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Jpg/Png/Gif/Bmp/Tga/Tif be supported</code></div><div class="line number3 index2 alt2"><code class="cpp comments">// for Linux : Only Bmp/Tga are supported, but you can set</code></div><div class="line number4 index3 alt1"><code class="cpp comments">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FreeImage handler to support more.</code></div><div class="line number5 index4 alt2"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number6 index5 alt1"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">) ;</code></div><div class="line number7 index6 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(!img.IsValidImage())</code></div><div class="line number8 index7 alt1"><code class="cpp plain">{</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">(</code><code class="cpp keyword bold">false</code><code class="cpp plain">) ;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code> <code class="cpp plain">;</code></div><div class="line number11 index10 alt2"><code class="cpp plain">}</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number13 index12 alt2"><code class="cpp comments">// print image's information : width, height, bit per pixel</code></div><div class="line number14 index13 alt1"><code class="cpp functions bold">printf</code> <code class="cpp plain">(</code><code class="cpp string">"image's width : %d"</code><code class="cpp plain">,&nbsp; img.Width()) ;</code></div><div class="line number15 index14 alt2"><code class="cpp functions bold">printf</code> <code class="cpp plain">(</code><code class="cpp string">"image's height : %d"</code><code class="cpp plain">, img.Height()) ;</code></div><div class="line number16 index15 alt1"><code class="cpp functions bold">printf</code> <code class="cpp plain">(</code><code class="cpp string">"image's bpp : %d"</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp; img.ColorBits()) ;</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number18 index17 alt1"><code class="cpp comments">// Load/Save function determine image's format by file's ext name</code></div><div class="line number19 index18 alt2"><code class="cpp comments">// save image as jpeg file, its quality set 90 (ranges from 1 to 99)</code></div><div class="line number20 index19 alt1"><code class="cpp plain">img.Save (</code><code class="cpp string">"save.jpg"</code><code class="cpp plain">, 90) ;</code></div><div class="line number21 index20 alt2"><code class="cpp plain">img.Save (</code><code class="cpp string">"save.png"</code><code class="cpp plain">) ;</code></div><div class="line number22 index21 alt1"><code class="cpp plain">img.Save (</code><code class="cpp string">"save.tif"</code><code class="cpp plain">) ;</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="cpp comments">// Another way to set quality</code></div><div class="line number25 index24 alt2"><code class="cpp plain">FCImageProperty&nbsp;&nbsp; prop ;</code></div><div class="line number26 index25 alt1"><code class="cpp plain">prop.SetPropertyValue (IMAGE_TAG_JPEG_QUALITY, </code><code class="cpp string">"90"</code><code class="cpp plain">) ;</code></div><div class="line number27 index26 alt2"><code class="cpp plain">img.Save (</code><code class="cpp string">"save.jpg"</code><code class="cpp plain">, prop) ;</code></div></div></td></tr></tbody></table></div></div>
<p>在任意操作系统中从内存加载图像</p>
<p>&nbsp;</p>
<div><div id="highlighter_316306" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Load image into memory</code></div><div class="line number2 index1 alt1"><code class="cpp color1 bold">char</code>&nbsp;&nbsp; <code class="cpp plain">* p = 0 ;</code></div><div class="line number3 index2 alt2"><code class="cpp color1 bold">int</code>&nbsp;&nbsp;&nbsp; <code class="cpp plain">n = 0 ;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">FCOXOHelper::LoadFileToBuffer (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">, p, n) ;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number7 index6 alt2"><code class="cpp plain">img.Load (p, n, IMG_JPG) ;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="cpp keyword bold">delete</code><code class="cpp plain">[] p ;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number11 index10 alt2"><code class="cpp comments">// this line demonstrates how to determine the image's format by</code></div><div class="line number12 index11 alt1"><code class="cpp comments">// the file's ext name</code></div><div class="line number13 index12 alt2"><code class="cpp plain">IMAGE_TYPE&nbsp; t = FCObjImage::GetImageHandleFactory()-&gt;</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">QueryImageFileType(</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
<p>在任意操作系统中从DIB流中加载图像</p>
<p>&nbsp;</p>
<div><div id="highlighter_53733" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Load image into memory</code></div><div class="line number2 index1 alt1"><code class="cpp color1 bold">char</code>&nbsp;&nbsp; <code class="cpp plain">* p = 0 ;</code></div><div class="line number3 index2 alt2"><code class="cpp color1 bold">int</code>&nbsp;&nbsp;&nbsp; <code class="cpp plain">n = 0 ;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">FCOXOHelper::LoadFileToBuffer (</code><code class="cpp string">"test.bmp"</code><code class="cpp plain">, p, n) ;</code></div><div class="line number5 index4 alt2"><code class="cpp plain">p += </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(BITMAPFILEHEADER) ;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp comments">// now p points to a DIB stream</code></div><div class="line number8 index7 alt1"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">img.LoadDIBStream (p, n) ;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number11 index10 alt2"><code class="cpp keyword bold">delete</code><code class="cpp plain">[] p ;</code></div></div></td></tr></tbody></table></div></div>
<p>Windows中从资源加载图像</p>
<p>&nbsp;</p>
<div><div id="highlighter_41866" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Load image from local exe file</code></div><div class="line number2 index1 alt1"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number3 index2 alt2"><code class="cpp plain">FCWin32::LoadImageRes (img, MAKEINTRESOURCE(nID), TEXT(</code><code class="cpp string">"JPG"</code><code class="cpp plain">),</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">IMG_JPG) ;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp comments">// Load image from DLL's resource</code></div><div class="line number7 index6 alt2"><code class="cpp color1 bold">HMODULE</code>&nbsp;&nbsp; <code class="cpp plain">hDll = LoadLibrary (TEXT(</code><code class="cpp string">"ResDll.dll"</code><code class="cpp plain">)) ;</code></div><div class="line number8 index7 alt1"><code class="cpp plain">FCWin32::LoadImageRes (img, MAKEINTRESOURCE(nID), TEXT(</code><code class="cpp string">"JPG"</code><code class="cpp plain">),</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">IMG_JPG, hDll) ;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number11 index10 alt2"><code class="cpp comments">// Load image from standard BITMAP resource</code></div><div class="line number12 index11 alt1"><code class="cpp plain">FCWin32::LoadImageBitmapRes (img, MAKEINTRESOURCE(nID));</code></div></div></td></tr></tbody></table></div></div>
<p>通过FreeImage库加载/保存图像</p>
<p>&nbsp;</p>
<div><div id="highlighter_416142" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// change to FreeImage library to load/save image</code></div><div class="line number2 index1 alt1"><code class="cpp comments">// for more detail, refer to example 005</code></div><div class="line number3 index2 alt2"><code class="cpp plain">FCObjImage::SetImageHandleFactory (</code><code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandleFactory_FreeImage) ;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">) ;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp comments">// change to GDI+ load/save image</code></div><div class="line number7 index6 alt2"><code class="cpp plain">FCObjImage::SetImageHandleFactory (</code><code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandleFactory_Gdiplus) ;</code></div><div class="line number8 index7 alt1"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">) ;</code></div></div></td></tr></tbody></table></div></div>
<p>结合ImageHandleFactory</p>
<p>&nbsp;</p>
<div><div id="highlighter_628130" class="syntaxhighlighter  cpp "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// use FreeImage to load/save PSD/PCX image</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">class</code> <code class="cpp plain">CMyImageFactory : </code><code class="cpp keyword bold">public</code> <code class="cpp plain">FCImageHandleFactory</code></div><div class="line number3 index2 alt2"><code class="cpp plain">{</code></div><div class="line number4 index3 alt1"><code class="cpp keyword bold">protected</code><code class="cpp plain">:</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">virtual</code> <code class="cpp plain">FCImageHandleBase* CreateImageHandle (IMAGE_TYPE imgType)</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">switch</code> <code class="cpp plain">(imgType)</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">IMG_BMP : </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandle_Bmp ;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">IMG_TGA : </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandle_Tga ;</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">IMG_JPG : </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandle_Gdiplus ;</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">IMG_GIF : </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandle_Gdiplus ;</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">IMG_TIF : </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandle_Gdiplus ;</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">IMG_PNG : </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandle_Gdiplus ;</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">IMG_PCX : </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandle_FreeImage ;</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">IMG_PSD : </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">new</code> <code class="cpp plain">FCImageHandle_FreeImage ;</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0 ;</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// protected avoid user delete object.</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">virtual</code> <code class="cpp plain">~CMyImageFactory() {}</code></div><div class="line number22 index21 alt1"><code class="cpp plain">};</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="cpp comments">// use our custom factory to read/write image</code></div><div class="line number25 index24 alt2"><code class="cpp plain">FCObjImage::SetImageHandleFactory (</code><code class="cpp keyword bold">new</code> <code class="cpp plain">CMyImageFactory) ;</code></div><div class="line number26 index25 alt1"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number27 index26 alt2"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">) ;</code></div></div></td></tr></tbody></table></div></div>
<p>加载多帧GIF</p>
<p>&nbsp;</p>
<div><div id="highlighter_110705" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">FCObjMultiFrame&nbsp;&nbsp; img ;</code></div><div class="line number2 index1 alt1"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.gif"</code><code class="cpp plain">) ;</code></div><div class="line number3 index2 alt2"><code class="cpp plain">img.GetFrame(0)-&gt;Save (</code><code class="cpp string">"001.jpg"</code><code class="cpp plain">) ;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">img.GetFrame(1)-&gt;Save (</code><code class="cpp string">"001.jpg"</code><code class="cpp plain">) ;</code></div></div></td></tr></tbody></table></div></div>
<p>得到jpeg的EXIF信息</p>
<p>&nbsp;</p>
<div><div id="highlighter_617220" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">FCObjImage&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; img ;</code></div><div class="line number2 index1 alt1"><code class="cpp plain">FCImageProperty&nbsp;&nbsp; prop ;</code></div><div class="line number3 index2 alt2"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">, &amp;prop) ;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp comments">// get camera's ISO speed</code></div><div class="line number6 index5 alt1"><code class="cpp plain">std::string&nbsp;&nbsp; m = prop.QueryPropertyValue (IMAGE_TAG_EXIF_ISOSpeed) ;</code></div><div class="line number7 index6 alt2"><code class="cpp comments">// get camera's equip model</code></div><div class="line number8 index7 alt1"><code class="cpp plain">std::string&nbsp;&nbsp; n = prop.QueryPropertyValue (IMAGE_TAG_EquipModel) ;</code></div></div></td></tr></tbody></table></div></div>
<p>在Windows环境下绘制图像对象</p>
<p>&nbsp;</p>
<div><div id="highlighter_813031" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number2 index1 alt1"><code class="cpp comments">// capture current screen</code></div><div class="line number3 index2 alt2"><code class="cpp plain">RECT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rc = {0, 0, GetSystemMetrics(SM_CXSCREEN),</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GetSystemMetrics(SM_CYSCREEN)} ;</code></div><div class="line number5 index4 alt2"><code class="cpp plain">FCWin32::CaptureScreen (img, rc) ;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp comments">// Draw image (no stretch) where top-left at (0,0) of hdc</code></div><div class="line number8 index7 alt1"><code class="cpp plain">FCWin32::DrawImage (img, hdc, 0, 0) ;</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number10 index9 alt1"><code class="cpp comments">// Stretch image on region of hdc</code></div><div class="line number11 index10 alt2"><code class="cpp plain">RECT&nbsp;&nbsp;&nbsp;&nbsp; rcOnDC = {100, 100, 200, 200} ;</code></div><div class="line number12 index11 alt1"><code class="cpp plain">FCWin32::DrawImage (img, hdc, rcOnDC) ;</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number14 index13 alt1"><code class="cpp comments">// Stretch image on central of hdc's region and keep image's aspect</code></div><div class="line number15 index14 alt2"><code class="cpp plain">FCWin32::DrawImageAspect (img, hdc, rcOnDC) ;</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number17 index16 alt2"><code class="cpp comments">// Stretch region of image on region of hdc</code></div><div class="line number18 index17 alt1"><code class="cpp plain">RECT&nbsp;&nbsp;&nbsp;&nbsp; rcImg = {20, 20, 50, 50} ;</code></div><div class="line number19 index18 alt2"><code class="cpp plain">FCWin32::DrawImage (img, hdc, rcOnDC, rcImg) ;</code></div></div></td></tr></tbody></table></div></div>
<p>复制/粘贴图像到剪切板</p>
<p>&nbsp;</p>
<div><div id="highlighter_498053" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number2 index1 alt1"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">) ;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp comments">// copy image to Clipboard</code></div><div class="line number5 index4 alt2"><code class="cpp plain">FCWin32::CopyToClipboard (img) ;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp comments">// get image on Clipboard</code></div><div class="line number8 index7 alt1"><code class="cpp plain">FCWin32::GetClipboardImage (img) ;</code></div></div></td></tr></tbody></table></div></div>
<p>GDI HBITMAP和FCObjImage之间的转换</p>
<p>&nbsp;</p>
<div><div id="highlighter_402325" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// create HBITMAP from FCObjImage object</code></div><div class="line number2 index1 alt1"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number3 index2 alt2"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">) ;</code></div><div class="line number4 index3 alt1"><code class="cpp color1 bold">HBITMAP</code>&nbsp;&nbsp; <code class="cpp plain">h = FCWin32::CreateDDBHandle (img) ;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp comments">// create FCObjImage object from HBITMAP</code></div><div class="line number7 index6 alt2"><code class="cpp plain">FCWin32::CreateImageFromDDB (h, img) ;</code></div></div></td></tr></tbody></table></div></div>
<p>GDI+ 位图和FCObjImage之间的转换</p>
<p>&nbsp;</p>
<div><div id="highlighter_930647" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// create GDI+ Bitmap from FCObjImage object</code></div><div class="line number2 index1 alt1"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number3 index2 alt2"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">) ;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">Gdiplus::Bitmap&nbsp;&nbsp; * pBmp = FCWin32::GDIPlus_CreateBitmap(img) ;</code></div><div class="line number5 index4 alt2"><code class="cpp keyword bold">delete</code> <code class="cpp plain">pBmp ;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp comments">// create FCObjImage object from GDI+ Bitmap</code></div><div class="line number8 index7 alt1"><code class="cpp plain">FCWin32::GDIPlus_LoadBitmap (*pBmp, img) ;</code></div></div></td></tr></tbody></table></div></div>
<p>图像处理</p>
<p>&nbsp;</p>
<div><div id="highlighter_262798" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number2 index1 alt1"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">) ;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp comments">// resize (smooth) image</code></div><div class="line number5 index4 alt2"><code class="cpp plain">img.Stretch (nWidth, nHeight) ;</code></div><div class="line number6 index5 alt1"><code class="cpp plain">img.Stretch_Smooth (nWidth, nHeight) ;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp comments">// Use SinglePixelProcessProc interface to process image.</code></div><div class="line number9 index8 alt2"><code class="cpp comments">// There are over 100 pre-implemented effects;</code></div><div class="line number10 index9 alt1"><code class="cpp comments">// please refer to class derived from FCInterface_PixelProcess</code></div><div class="line number11 index10 alt2"><code class="cpp plain">FCPixelRotate&nbsp;&nbsp; aCmd (37) ;</code></div><div class="line number12 index11 alt1"><code class="cpp plain">img.SinglePixelProcessProc (aCmd) ;</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number14 index13 alt1"><code class="cpp plain">FCPixelBrightness&nbsp;&nbsp; aCmd (150) ;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// 150%</code></div><div class="line number15 index14 alt2"><code class="cpp plain">img.SinglePixelProcessProc (aCmd) ;</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number17 index16 alt2"><code class="cpp plain">FCPixelMosaic&nbsp;&nbsp; aCmd(5) ;</code></div><div class="line number18 index17 alt1"><code class="cpp plain">img.SinglePixelProcessProc (aCmd) ;</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number20 index19 alt1"><code class="cpp plain">FCPixelOilPaint&nbsp;&nbsp; aCmd (3) ;</code></div><div class="line number21 index20 alt2"><code class="cpp plain">img.SinglePixelProcessProc (aCmd) ;</code></div></div></td></tr></tbody></table></div></div>
<p>自定义图像处理</p>
<p>&nbsp;</p>
<div><div id="highlighter_124962" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// our processor : change pixel's RGB value</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">class</code> <code class="cpp plain">CMyPixelProcessor : </code><code class="cpp keyword bold">public</code> <code class="cpp plain">FCSinglePixelProcessBase</code></div><div class="line number3 index2 alt2"><code class="cpp plain">{</code></div><div class="line number4 index3 alt1"><code class="cpp keyword bold">public</code><code class="cpp plain">:</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">CMyPixelProcessor (</code><code class="cpp color1 bold">int</code> <code class="cpp plain">nR, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">nG, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">nB) : m_R(nR), m_G(nG),</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">m_B(nB) {}</code></div><div class="line number7 index6 alt2"><code class="cpp keyword bold">private</code><code class="cpp plain">:</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">virtual</code> <code class="cpp keyword bold">void</code> <code class="cpp plain">ProcessPixel (FCObjImage* pImg, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">x, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">y,</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">BYTE</code><code class="cpp plain">* pPixel)</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">PCL_B(pPixel) = FClamp0255 (PCL_B(pPixel) + m_B) ;</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">PCL_G(pPixel) = FClamp0255 (PCL_G(pPixel) + m_G) ;</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">PCL_R(pPixel) = FClamp0255 (PCL_R(pPixel) + m_R) ;</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code>&nbsp;&nbsp; <code class="cpp plain">m_R, m_G, m_B ;</code></div><div class="line number16 index15 alt1"><code class="cpp plain">};</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number18 index17 alt1"><code class="cpp comments">// this class has the same function to upper class,</code></div><div class="line number19 index18 alt2"><code class="cpp comments">// but implements other class</code></div><div class="line number20 index19 alt1"><code class="cpp keyword bold">class</code> <code class="cpp plain">CMyImageProcessor : </code><code class="cpp keyword bold">public</code> <code class="cpp plain">FCPixelWholeImageBase</code></div><div class="line number21 index20 alt2"><code class="cpp plain">{</code></div><div class="line number22 index21 alt1"><code class="cpp keyword bold">public</code><code class="cpp plain">:</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">CMyPixelProcessor (</code><code class="cpp color1 bold">int</code> <code class="cpp plain">nR, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">nG, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">nB) : m_R(nR), m_G(nG),</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">m_B(nB) {}</code></div><div class="line number25 index24 alt2"><code class="cpp keyword bold">private</code><code class="cpp plain">:</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">virtual</code> <code class="cpp keyword bold">void</code> <code class="cpp plain">ProcessWholeImage (FCObjImage* pImg,</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">FCObjProgress* pProgress)</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code> <code class="cpp plain">(</code><code class="cpp color1 bold">int</code> <code class="cpp plain">y=0 ; y &lt; pImg-&gt;Height() ; y++)</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code> <code class="cpp plain">(</code><code class="cpp color1 bold">int</code> <code class="cpp plain">x=0 ; x &lt; pImg-&gt;Width() ; x++)</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">BYTE</code>&nbsp;&nbsp; <code class="cpp plain">* p = pImg-&gt;GetBits(x,y) ;</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">PCL_B(p)&nbsp;&nbsp; = FClamp0255 (PCL_B(p) + m_B) ;</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">PCL_G(p)&nbsp;&nbsp; = FClamp0255 (PCL_G(p) + m_G) ;</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">PCL_R(p)&nbsp;&nbsp; = FClamp0255 (PCL_R(p) + m_R) ;</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(pProgress)</code></div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">pProgress-&gt;SetProgress (100 * y / pImg-&gt;Height()) ;</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code>&nbsp;&nbsp; <code class="cpp plain">m_R, m_G, m_B ;</code></div><div class="line number43 index42 alt2"><code class="cpp plain">};</code></div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number45 index44 alt2"><code class="cpp comments">// use our custom processor</code></div><div class="line number46 index45 alt1"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number47 index46 alt2"><code class="cpp plain">img.Load (</code><code class="cpp string">"test.jpg"</code><code class="cpp plain">) ;</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number49 index48 alt2"><code class="cpp plain">CMyPixelProcessor&nbsp;&nbsp; aCmd (20, 20, 20) ;</code></div><div class="line number50 index49 alt1"><code class="cpp plain">img.SinglePixelProcessProc (aCmd) ;</code></div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number52 index51 alt1"><code class="cpp plain">CMyImageProcessor&nbsp;&nbsp; aCmd (20, 20, 20) ;</code></div><div class="line number53 index52 alt2"><code class="cpp plain">img.SinglePixelProcessProc (aCmd) ;</code></div></div></td></tr></tbody></table></div></div>
<p>添加文字到图像</p>
<p>&nbsp;</p>
<div><div id="highlighter_980482" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">FCObjImage&nbsp;&nbsp; img ;</code></div><div class="line number2 index1 alt1"><code class="cpp plain">img.Load (</code><code class="cpp string">"c:\\test.jpg"</code><code class="cpp plain">) ;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp comments">// now we create text layer</code></div><div class="line number5 index4 alt2"><code class="cpp plain">FCObjTextLayer&nbsp;&nbsp; imgT ;</code></div><div class="line number6 index5 alt1"><code class="cpp plain">PACK_TextLayer&nbsp;&nbsp; tp ;</code></div><div class="line number7 index6 alt2"><code class="cpp plain">tp.m_bAddShadow&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code> <code class="cpp plain">;</code></div><div class="line number8 index7 alt1"><code class="cpp plain">tp.m_bAntiAliased = </code><code class="cpp keyword bold">true</code> <code class="cpp plain">;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">tp.m_bBold&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code> <code class="cpp plain">;</code></div><div class="line number10 index9 alt1"><code class="cpp plain">tp.m_bItalic&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code> <code class="cpp plain">;</code></div><div class="line number11 index10 alt2"><code class="cpp plain">tp.m_crFont&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = PCL_RGBA(0,0,255) ;</code></div><div class="line number12 index11 alt1"><code class="cpp plain">tp.m_nFontSize&nbsp;&nbsp;&nbsp; = 128 ;</code></div><div class="line number13 index12 alt2"><code class="cpp plain">tp.m_strFace&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp string">"Arial"</code> <code class="cpp plain">;</code></div><div class="line number14 index13 alt1"><code class="cpp plain">tp.m_strText&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp string">"Hello"</code> <code class="cpp plain">;</code></div><div class="line number15 index14 alt2"><code class="cpp plain">FCWin32::CreateTextLayer_GDIPlus (imgT, tp) ;</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number17 index16 alt2"><code class="cpp comments">// Now we have created a text image. Additionaly,</code></div><div class="line number18 index17 alt1"><code class="cpp comments">// we can add some affect to it, such as gradient color</code></div><div class="line number19 index18 alt2"><code class="cpp plain">POINT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pt1={0,0}, pt2={0,50} ;</code></div><div class="line number20 index19 alt1"><code class="cpp plain">FCPixelGradientLine&nbsp;&nbsp; aCmd (pt1, pt2, PCL_RGBA(0,0,255),</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">FCColor::crWhite()) ;</code></div><div class="line number22 index21 alt1"><code class="cpp plain">imgT.SinglePixelProcessProc (aCmd) ;</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="cpp comments">// blend text layer on image</code></div><div class="line number25 index24 alt2"><code class="cpp plain">RECT&nbsp;&nbsp; rc = {0, 0, imgT.Width(), imgT.Height()} ;</code></div><div class="line number26 index25 alt1"><code class="cpp plain">img.AlphaBlend (imgT, rc, rc, 100) ;</code></div></div></td></tr></tbody></table></div></div>
<p>下载源代码：<a href="http://www.okbase.net/file/item/2994">http://www.okbase.net/file/item/2994</a></p>
<p></p></div>
<!-- JiaThis Button BEGIN -->
<div id="ckepop" style="margin-top:10px;">
	<a href="http://www.jiathis.com/share/" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank">分享到：</a>
	<a title="分享到QQ空间" class="jiathis_button_qzone"><span class="jiathis_txt jtico jtico_qzone"></span></a>
	<a title="分享到新浪微博" class="jiathis_button_tsina"><span class="jiathis_txt jtico jtico_tsina"></span></a>
	<a title="分享到开心网" class="jiathis_button_kaixin001"><span class="jiathis_txt jtico jtico_kaixin001"></span></a>
	<a title="分享到人人网" class="jiathis_button_renren"><span class="jiathis_txt jtico jtico_renren"></span></a>
</div>
<script type="text/javascript" src="instructure_files/jia.js" charset="utf-8"></script><script type="text/javascript" src="instructure_files/plugin.js" charset="utf-8"></script><div style="position:absolute;width:0px;height:0px;"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="JIATHISSWF" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" height="0" width="0"><param name="allowScriptAccess" value="always"><param name="swLiveConnect" value="true"><param name="movie" value="http://www.jiathis.com/code/swf/m.swf"><param name="FlashVars" value="z=a"><embed name="JIATHISSWF" src="instructure_files/m.swf" flashvars="z=a" allowscriptaccess="always" swliveconnect="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" height="0" width="0"></object></div>
<!-- JiaThis Button END -->
<div class="okbclear"></div>
<br>
<div id="comments">
评论 [<a href="http://www.okbase.net/comment/doc/2528">发表评论</a>]
<script>
    function sendcmt() {
        $.ajax({
            url: "/comment/ajaxcreate",
            type: "POST",
            data: {
                username: $("#username").val(),
                password: $("#password").val(),
                gcatid: $("#gcatid").val(),
                itemid: $("#itemid").val(),
                cmtdetails: $("#cmtdetails").val()
            },
            dataType: "json",
            error: function () {
                alert('加载失败');
            },
            success: function (json) {
                alert(json[0].resultmsg);
            }
        });
        return false;
    }
</script>
<ul class="listview comment">
</ul>

<form action="" method="post" onsubmit="return sendcmt()">
<div>账号<input id="username" name="username" style="width:80px;" type="text"> 
密码<input id="password" name="password" value="" style="width:80px;" type="password">
还没帐号呢，<a href="http://www.okbase.net/account/register" target="_blank">现在注册一个？</a>
</div><textarea name="cmtdetails" id="cmtdetails" cols="60" rows="8"></textarea>
<input id="gcatid" name="gcatid" value="100" type="hidden">
<input id="itemid" name="itemid" value="2528" type="hidden">
<input id="attachment" name="attachment" value="false" type="hidden">
<input id="pic" name="pic" value="false" type="hidden">
<div class="flatbutton"><button class="iconbutton" type="submit">
<img src="instructure_files/apply.png" alt="评论">
&nbsp;评 论&nbsp;&nbsp;&nbsp;</button></div>
</form>
</div>
<br>
<p class="tipsmsg">免责声明：好库网所展示的信息由买卖双方自行提供，其真实性、准确性和合法性由信息发布人负责。好库网不提供任何保证，并不承担任何法律责任。</p>
</div> 


</div>

<div id="bottomframe">

<div id="sitefoot">
<a href="http://www.okbase.net/site/about">好库简介</a> | <a href="http://www.okbase.net/site/map">网站地图</a> | <a href="http://www.okbase.net/support/help">帮助中心</a> | <a href="http://www.okbase.net/site/copyright">版权说明</a><br> 
Copyright© 2009-2012 OKBASE.NET All Rights Reserved 好库网 版权所有 <script src="instructure_files/stat.php" language="JavaScript"></script><script src="instructure_files/cnzz_core.php" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=1296032" target="_blank" title="站长统计">站长统计</a>
</div>
</div>



<iframe src="instructure_files/e.htm" style="position: absolute; width: 100px; height: 1px; z-index: -10240; visibility: hidden; top: 0px; left: 0px;"></iframe></body></html>